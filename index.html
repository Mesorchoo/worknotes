<html>
<head>
<script src="phonegap.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script type="text/javascript" language="javascript">

document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {	
	var db = window.openDatabase('database', '1.0', 'database', 1000000);
	db.transaction(populateDB);
}
	

function populateDB(tx){
	console.log('populating');
    //tx.executeSql('DROP TABLE IF EXISTS TEST');
	tx.executeSql('CREATE TABLE IF NOT EXISTS TEST (id INTEGER PRIMARY KEY AUTOINCREMENT, data)');
	tx.executeSql('INSERT INTO TEST (data) VALUES ("example4")');
	tx.executeSql('INSERT INTO TEST (data) VALUES ("example5")');
	tx.executeSql('INSERT INTO TEST (data) VALUES ("example6")');
	console.log('selecting');
	tx.executeSql('SELECT * FROM TEST', [], successResult, failResult);
}

function successResult(tx, results){
	alert('success');
	console.log('returned db rows: '+results.rows.length);
	for(var i=0;i<results.rows.length;i++){	
		$('#results').append('<li>'+results.rows.item(i).data+'</li>');
		console.log(results.rows.item(i).data);
	}
	$(results).each(function(index, item){
		//$('#results').html($(item.rows).param());
	});
}

function failResult(tx, results){
	alert('failure');
}

var clientList = [
	'Warp',
	'Other people'
];

$('[name=client]').autocomplete({
	source: clientList
});
</script>
</head>
<body>
<div id="loadBar" style="display:none;"></div>
<h1>Worknotes</h1>
<form method="get" action="">
    <input type="text" name="client" value="" />
    <input type="text" name="finishTime[date]" id="finishTime-date" value="2013-05-29" tabindex="40">
    <input type="text" name="finishTime[enter_time]" id="finishTime-enter_time" value="" tabindex="41"
        onchange="$.ajax({url: '/new/Worknotes/strtotime/string/' + $('#finishTime-enter_time').val(),success: function(data){$('#finishTime-time').val(data);}});">
    <input type="text" name="finishTime[time]" id="finishTime-time" value="15:27:36" readonly="readonly" tabindex="-1">
</form>
<ul id="results"></ul>


</body>
</html>